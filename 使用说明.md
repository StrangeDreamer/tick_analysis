# Tick Analysis 量化分析自动运行系统

## 核心文件说明

### 主要脚本
- **`quant_analysis copy.py`** - 量化分析主程序（包含涨跌幅<9%过滤）
- **`scheduler.py`** - 循环执行调度器（每轮完成后立即开始下一轮）
- **`start_scheduler.sh`** - 启动脚本（后台运行调度器）

### 配置文件
- **`requirements.txt`** - Python依赖包
- **`README_调度器.md`** - 详细使用说明

## 快速启动

### 方法1：直接运行调度器（推荐）
```bash
cd /Users/bytedance/Desktop/tick_analysis
python3 scheduler.py
```

### 方法2：后台运行调度器
```bash
cd /Users/bytedance/Desktop/tick_analysis
./start_scheduler.sh
```

### 方法3：手动运行单次分析
```bash
cd /Users/bytedance/Desktop/tick_analysis
python3 "quant_analysis copy.py"
```

## 执行特点

### 循环执行模式
- **连续执行**：上一轮完成后立即开始下一轮
- **超时保护**：每轮最多5分钟，超时后强制开始下一轮
- **开市时间**：只在A股开市时间执行（周一至周五 9:30-15:00）
- **非开市时间**：等待1分钟后重新检查

### 股票筛选条件
- **价格范围**：5-30元
- **市值范围**：50-500亿流通市值
- **涨跌幅**：<9%（发送到钉钉的条件）
- **买盘比例**：<98%（发送到钉钉的条件）

### 钉钉消息
- **发送条件**：买盘比例<98% 且 涨跌幅<9%
- **发送内容**：所有符合条件的股票评分排序
- **图表**：前3只股票的分时图

## 停止运行

### 前台运行
按 `Ctrl+C` 停止

### 后台运行
```bash
# 查找进程
ps aux | grep scheduler

# 停止进程（替换<PID>为实际进程ID）
kill <PID>
```

## 查看日志

### 后台运行日志
```bash
tail -f scheduler.log
```

### 实时查看运行状态
```bash
# 查看Python进程
ps aux | grep python

# 查看调度器进程
ps aux | grep scheduler
```

## 故障排除

1. **网络问题**：检查网络连接，AKShare接口可能不稳定
2. **钉钉发送失败**：检查webhook配置
3. **进程停止**：重新启动调度器
4. **数据异常**：检查API接口状态

## 注意事项

- 确保网络连接稳定
- 建议在服务器上运行
- 循环执行会持续运行，请确保系统资源充足
- 每轮执行有5分钟超时限制